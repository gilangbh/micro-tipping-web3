# Frontend - Next.js DApp (Micro-Tipping)

This directory contains the Next.js frontend application for the micro-tipping platform. It allows users to connect their wallets, interact with the `Tipping.sol` smart contract on the Camp Testnet, and send tips.

## Features

*   **Wallet Connection**: Uses RainbowKit and Wagmi for connecting to Ethereum wallets (e.g., MetaMask).
*   **Network**: Configured for Camp Testnet (Basecamp).
*   **Tipping Interface**: Allows users to specify a recipient address and amount to send a tip.
*   **Contract Interaction**: Communicates with the deployed `Tipping.sol` smart contract to execute tips.
*   **UI**: Built with Next.js (App Router), React, and Tailwind CSS.

## Prerequisites

*   **Node.js**: v20.x.x (LTS) recommended (due to Next.js version compatibility).
*   **npm**.
*   **MetaMask Browser Extension**: Configured for the Camp Testnet (Basecamp).
    *   **Network Name:** Basecamp Testnet
    *   **RPC URL:** `https://rpc.basecamp.t.raas.gelato.cloud`
    *   **Chain ID:** `123420001114`
    *   **Currency Symbol:** `CAMP`
    *   **Block Explorer URL:** `https://basecamp.cloud.blockscout.com`
*   **WalletConnect Project ID**: Obtain one from [cloud.walletconnect.com](https://cloud.walletconnect.com).

## Setup

1.  **Navigate to this directory:**
    ```bash
    cd frontend
    ```

2.  **Install Dependencies:**
    ```bash
    npm install
    ```
    *Note: This project uses Next.js v14.2.4, React v18.3.1, and `ethers` v6. These versions were chosen to resolve compatibility issues with `@campnetwork/sdk` (which requires React 18). If you encounter issues, ensure your Node.js version is compatible (v20.x.x recommended).*

3.  **Create `.env.local` file:**
    Create a `.env.local` file in this `frontend/` directory for your WalletConnect Project ID:
    ```env
    NEXT_PUBLIC_WALLETCONNECT_PROJECT_ID="YOUR_WALLETCONNECT_PROJECT_ID"
    ```
    *   Replace `YOUR_WALLETCONNECT_PROJECT_ID` with your actual ID.

4.  **Smart Contract Address Configuration:**
    The smart contract address is automatically read from `src/generated/contract-address.json`. This file is created/updated by the smart contract deployment script located in the `web3/` directory (`web3/scripts/deploy.js`).

    **Ensure you have run the deployment script from the `web3/` directory successfully before starting the frontend.** If the file is missing or incorrect, the DApp will not be able to connect to the contract.

    The address is used in `frontend/src/app/page.tsx`:
    ```typescript
    import contractAddressData from '@/generated/contract-address.json';
    // ...
    const contractAddress = contractAddressData.address;
    ```

## Running the Development Server

*   **Start the Next.js development server:**
    ```bash
    npm run dev
    ```
    The application will typically be available at `http://localhost:3000`.

## Key Files & Structure

*   **`src/app/page.tsx`**: The main page component. Contains the UI for wallet connection, displaying wallet/contract info, and the tipping form.
*   **`src/app/layout.tsx`**: The main layout component, wraps the application with global providers.
*   **`src/app/providers.tsx`**: Configures and provides `WagmiProvider` and `RainbowKitProvider` for wallet connectivity. This is where the Camp Testnet (Basecamp) chain is defined for Wagmi.
*   **`src/generated/contract-address.json`**: This file is automatically generated by the smart contract deployment script. It contains the address of the deployed `Tipping.sol` contract. **Do not edit this file manually.** It should be in your `.gitignore`.
*   **`next.config.js`**: Next.js configuration file (using JavaScript module format).
*   **`tailwind.config.ts`**: Tailwind CSS configuration.
*   **`package.json`**: Lists dependencies and scripts.
    *   `dev` script: `next dev` (note: `--turbopack` was removed due to issues).

## Wallet and Network Configuration (`providers.tsx`)

The Camp Testnet (Basecamp) is configured in `src/app/providers.tsx`:

```typescript
import { mainnet, sepolia } from 'wagmi/chains'; // Default chains
import { defineChain } from 'viem';

export const basecamp = defineChain({
  id: 123420001114,
  name: 'Basecamp Testnet',
  nativeCurrency: { name: 'CAMP', symbol: 'CAMP', decimals: 18 },
  rpcUrls: {
    default: {
      http: ['https://rpc.basecamp.t.raas.gelato.cloud'],
    },
  },
  blockExplorers: {
    default: { name: 'Blockscout', url: 'https://basecamp.cloud.blockscout.com' },
  },
});

// ... Wagmi and RainbowKit setup uses `basecamp` along with other chains.
```

## Troubleshooting

*   **Hydration Errors**: The `isMounted` pattern is used in `page.tsx` to prevent hydration errors with client-side only components like RainbowKit's `ConnectButton`. If you add more client-side specific components, ensure they are only rendered after the component has mounted.
*   **`Error: Configuring Next.js via 'next.config.ts' is not supported...`**: Fixed by renaming `next.config.ts` to `next.config.js` and converting its content to plain JavaScript (`module.exports`).
*   **`SyntaxError: Unexpected token '{'` in `next.config.js`**: Caused by ES module `import type`. Convert `next.config.js` to use CommonJS `require()` or plain JS object for `module.exports`.
*   **`Module not found: Can't resolve 'pino-pretty'`**: This was a transient dependency issue. Fixed by `npm install --save-dev pino-pretty`.
*   **React Version Conflicts**: If installing new Web3 libraries, be mindful of React version requirements. This project was pinned to React 18 due to `@campnetwork/sdk`.

This frontend provides the user interface to interact with your deployed tipping smart contract.
